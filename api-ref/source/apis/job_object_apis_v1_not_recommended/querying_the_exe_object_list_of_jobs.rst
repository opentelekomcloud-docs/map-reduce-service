:original_name: mrs_02_0046.html

.. _mrs_02_0046:

Querying the exe Object List of Jobs
====================================

Function
--------

This API is used to query the exe object list of all jobs. This API is incompatible with Sahara.

URI
---

-  Format

   GET /v1.1/{project_id}/job-exes

-  Parameter description

   .. table:: **Table 1** URI parameter description

      +------------+-----------+-----------------------------------------------------------------------------------------------------------+
      | Parameter  | Mandatory | Description                                                                                               |
      +============+===========+===========================================================================================================+
      | project_id | Yes       | Project ID. For details on how to obtain the project ID, see :ref:`Obtaining a Project ID <mrs_02_0011>`. |
      +------------+-----------+-----------------------------------------------------------------------------------------------------------+

Request
-------

.. table:: **Table 2** Request parameter description

   +-----------------+-----------------+-----------------+--------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                |
   +=================+=================+=================+============================================+
   | cluster_id      | Yes             | String          | Cluster ID                                 |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | id              | No              | String          | Job execution object ID                    |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | page_size       | No              | Integer         | Maximum number of jobs displayed on a page |
   |                 |                 |                 |                                            |
   |                 |                 |                 | Value range: 1 to 100                      |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | current_page    | No              | Integer         | Current page number                        |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | job_name        | No              | String          | Job name                                   |
   +-----------------+-----------------+-----------------+--------------------------------------------+
   | state           | No              | Integer         | Job status code                            |
   |                 |                 |                 |                                            |
   |                 |                 |                 | -  -1: Terminated                          |
   |                 |                 |                 | -  2: Running                              |
   |                 |                 |                 | -  3: Completed                            |
   |                 |                 |                 | -  4: Abnormal                             |
   +-----------------+-----------------+-----------------+--------------------------------------------+

Response
--------

.. table:: **Table 3** Response parameter description

   +-----------------------+-----------------------+--------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                        |
   +=======================+=======================+====================================================================+
   | totalRecord           | Integer               | Total number of jobs in a list                                     |
   +-----------------------+-----------------------+--------------------------------------------------------------------+
   | job_executions        | Array                 | Job list parameter                                                 |
   |                       |                       |                                                                    |
   |                       |                       | For details, see :ref:`Table 4 <mrs_02_0046__table3315199519550>`. |
   +-----------------------+-----------------------+--------------------------------------------------------------------+

.. _mrs_02_0046__table3315199519550:

.. table:: **Table 4** **job_executions** parameter description

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                                     |
   +=======================+=======================+=================================================================================================================================================================================================+
   | id                    | String                | Job ID                                                                                                                                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_at             | Integer               | Creation time, which is a 13-bit timestamp.                                                                                                                                                     |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_at             | Integer               | Update time, which is a 13-bit timestamp.                                                                                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tenant_id             | String                | Project ID. For details on how to obtain the project ID, see :ref:`Obtaining a Project ID <mrs_02_0011>`.                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_id                | String                | Job ID of the YARN                                                                                                                                                                              |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_name              | String                | Job name                                                                                                                                                                                        |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | start_time            | Integer               | Start time of job execution, which is a 13-bit timestamp.                                                                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | end_time              | Integer               | End time of job execution, which is a 13-bit timestamp.                                                                                                                                         |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cluster_id            | String                | Cluster ID of a job                                                                                                                                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | group_id              | String                | Group ID of a job                                                                                                                                                                               |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | jar_path              | String                | Path of the **.jar** file or **.sql** file for program execution                                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | input                 | String                | Address for inputting data                                                                                                                                                                      |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | output                | String                | Address for outputting data                                                                                                                                                                     |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_log               | String                | Address for storing job logs                                                                                                                                                                    |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_type              | Integer               | Job type code                                                                                                                                                                                   |
   |                       |                       |                                                                                                                                                                                                 |
   |                       |                       | -  1: MapReduce                                                                                                                                                                                 |
   |                       |                       | -  2: Spark                                                                                                                                                                                     |
   |                       |                       | -  3: Hive Script                                                                                                                                                                               |
   |                       |                       | -  4: HiveQL (not supported currently)                                                                                                                                                          |
   |                       |                       | -  5: DistCp                                                                                                                                                                                    |
   |                       |                       | -  6: Spark Script                                                                                                                                                                              |
   |                       |                       | -  7: Spark SQL (not supported in this API currently)                                                                                                                                           |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | file_action           | String                | Data import and export                                                                                                                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | arguments             | String                | Key parameter for program execution. The parameter is specified by the function of the user's internal program. MRS is only responsible for loading the parameter. This parameter can be empty. |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | hql                   | String                | HiveQL statement                                                                                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_state             | Integer               | Job status code                                                                                                                                                                                 |
   |                       |                       |                                                                                                                                                                                                 |
   |                       |                       | -  -1: Terminated                                                                                                                                                                               |
   |                       |                       | -  2: Running                                                                                                                                                                                   |
   |                       |                       | -  3: Completed                                                                                                                                                                                 |
   |                       |                       | -  4: Abnormal                                                                                                                                                                                  |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_final_status      | Integer               | Final job status.                                                                                                                                                                               |
   |                       |                       |                                                                                                                                                                                                 |
   |                       |                       | -  0: unfinished                                                                                                                                                                                |
   |                       |                       | -  1: terminated due to an execution error                                                                                                                                                      |
   |                       |                       | -  2: executed successfully                                                                                                                                                                     |
   |                       |                       | -  3: canceled                                                                                                                                                                                  |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | hive_script_path      | String                | Address of the Hive script                                                                                                                                                                      |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_by             | String                | User ID for creating jobs                                                                                                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | finished_step         | Integer               | Number of completed steps                                                                                                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_main_id           | String                | Main ID of a job                                                                                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job_step_id           | String                | Step ID of a job                                                                                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | postpone_at           | Integer               | Delay time, which is a 13-bit timestamp.                                                                                                                                                        |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | step_name             | String                | Step name of a job                                                                                                                                                                              |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | step_num              | Integer               | Number of steps                                                                                                                                                                                 |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_num              | Integer               | Number of tasks                                                                                                                                                                                 |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_by             | String                | User ID for updating jobs                                                                                                                                                                       |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | spend_time            | Integer               | Duration of job execution (unit: s)                                                                                                                                                             |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | step_seq              | Integer               | Step sequence of a job                                                                                                                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | progress              | String                | Job execution progress                                                                                                                                                                          |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example
-------

-  Example request

   .. code-block:: text

      GET/v1.1/{project_id}/job-exes?page_size=10&current_page=1&state=3&job_name=myfirstjob&clusterId=20ca8601-72a2-4570-b788-2a20fec81a95

-  Example response

   .. code-block::

      {
          "totalRecord": 14,
          "job_executions": [
              {
                  "id": "669476bd-89d2-45aa-8f1a-872d16de377e",
                  "create_at": 1484641003707,
                  "update_at": 1484641003707,
                  "tenant_id": "3f99e3319a8943ceb15c584f3325d064",
                  "job_id": "",
                  "job_name": "myfirstjob",
                  "start_time": 1484641003707,
                  "end_time": null,
                  "cluster_id": "2b460e01-3351-4170-b0a7-57b9dd5ffef3",
                  "group_id": "669476bd-89d2-45aa-8f1a-872d16de377e",
                  "jar_path": "s3a://jp-test1/program/hadoop-mapreduce-examples-2.4.1.jar",
                  "input": "s3a://jp-test1/input/",
                  "output": "s3a://jp-test1/output/",
                  "job_log": "s3a://jp-test1/joblogs/",
                  "job_type": 1,
                  "file_action": "",
                  "arguments": "wordcount",
                  "hql": "",
                  "job_state": 2,
                  "job_final_status": 1,
                  "hive_script_path": null,
                  "create_by": "3f99e3319a8943ceb15c584f3325d064",
                  "finished_step": 0,
                  "job_main_id": "",
                  "job_step_id": "",
                  "postpone_at": 1484641003174,
                  "step_name": "",
                  "step_num": 0,
                  "task_num": 0,
                  "update_by": "3f99e3319a8943ceb15c584f3325d064",
                  "spend_time": null,
                  "step_seq": 222,
                  "progress": "first progress"
              }
          ]
      }

Status Code
-----------

:ref:`Table 5 <mrs_02_0046__table1584477916050>` describes the status code of this API.

.. _mrs_02_0046__table1584477916050:

.. table:: **Table 5** Status code

   =========== ====================================================
   Status Code Description
   =========== ====================================================
   200         The exe object list of jobs is queried successfully.
   =========== ====================================================

For the description about error status codes, see :ref:`Status Codes <mrs_02_0015>`.
